(this["webpackJsonpgia-telefonica"]=this["webpackJsonpgia-telefonica"]||[]).push([[0],{20:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n(1),i=n(14),s=n.n(i),o=n(3),a=(n(20),function(e){var t=e.msg,n=e.setNewErrorNotification;n(t),setTimeout((function(){n(null)}),5e3)}),u=function(e){var t=e.message;return Object(r.jsx)("div",{className:"error",children:t})},j=function(e){var t=e.newSearch,n=e.setNewSearch;return Object(r.jsxs)("div",{children:["filter show with: ",Object(r.jsx)("input",{value:t,onChange:function(e){return n(e.target.value)}})]})},l=n(4),f=n.n(l),b="/api/persons",d=function(e){return f.a.post(b,e).then((function(e){return e.data}))},O=function(e){var t="".concat(b,"/").concat(e);return f.a.delete(t)},h=function(){return f.a.get(b).then((function(e){return e.data}))},m=function(e){var t=e.id,n=e.newObject,r="".concat(b,"/").concat(t);return f.a.put(r,n).then((function(e){return e.data}))},v=function(e){var t=e.name,n=e.number;return Object(r.jsxs)("li",{children:[t," ",n]})},w=function(e){var t=e.personsFiltered,n=e.setPersonsFiltered,c=e.setAllPersons,i=e.allPersons;return Object(r.jsx)("ul",{children:t.map((function(e){return Object(r.jsxs)("div",{children:[Object(r.jsx)(v,{name:e.name,number:e.number}),Object(r.jsx)("button",{onClick:function(){return function(e){window.confirm("Delete ".concat(e.name,"?"))&&O(e.id).then((function(){var r=t.filter((function(t){return t.id!==e.id})),s=i.filter((function(t){return t.id!==e.id}));n(r),c(s)}))}(e)},children:"Delete "})]},e.id)}))})},N=function(e){var t=e.newNumber,n=e.newName,c=e.allPersons,i=e.setNewName,s=e.setNewNumber,o=e.setAllPersons,u=e.setNewErrorNotification;return Object(r.jsxs)("form",{onSubmit:function(e){e.preventDefault();var r={name:n,number:t},j=c.find((function(e){return e.name===n}));j?function(e,t){m({id:e,newObject:t}).then((function(e){var t=c.map((function(t){return t.id===e.id?e:t}));o(t)})).catch((function(e){var t=e.response.data.error;console.log("ERROR//",t),a({msg:t,setNewErrorNotification:u})}))}(j.id,r):function(e){d(e).then((function(e){return o(c.concat(e))})).catch((function(e){var t=e.response.data.error;console.log("ERROR//",t),a({msg:t,setNewErrorNotification:u})}))}(r),i(""),s("")},children:[Object(r.jsxs)("div",{children:["name: ",Object(r.jsx)("input",{value:n,onChange:function(e){return i(e.target.value)}})]}),Object(r.jsxs)("div",{children:["number: ",Object(r.jsx)("input",{value:t,onChange:function(e){return s(e.target.value)}})]}),Object(r.jsx)("div",{children:Object(r.jsx)("button",{type:"submit",children:"add"})})]})},x=function(){var e=Object(c.useState)([]),t=Object(o.a)(e,2),n=t[0],i=t[1],s=Object(c.useState)([]),a=Object(o.a)(s,2),l=a[0],f=a[1],b=Object(c.useState)(""),d=Object(o.a)(b,2),O=d[0],m=d[1],v=Object(c.useState)(""),x=Object(o.a)(v,2),p=x[0],g=x[1],P=Object(c.useState)(""),S=Object(o.a)(P,2),E=S[0],C=S[1],R=Object(c.useState)(""),A=Object(o.a)(R,2),k=A[0],F=A[1];return Object(c.useEffect)((function(){h().then((function(e){return i(e)}))}),[]),Object(c.useEffect)((function(){var e=n.filter((function(e){return e.name.toLowerCase().includes(E.toLowerCase())}));f(e)}),[n,f,E]),Object(r.jsxs)("div",{children:[Object(r.jsx)("h2",{children:"Phonebook"}),k&&Object(r.jsx)(u,{message:k}),Object(r.jsx)(j,{newSearch:E,setNewSearch:C}),Object(r.jsx)("h2",{children:"Add a new"}),Object(r.jsx)(N,{newNumber:p,setNewNumber:g,newName:O,setNewName:m,allPersons:n,setAllPersons:i,setNewErrorNotification:F}),Object(r.jsx)("h2",{children:"Numbers"}),Object(r.jsx)(w,{personsFiltered:l,setPersonsFiltered:f,allPersons:n,setAllPersons:i})]})};s.a.render(Object(r.jsx)(x,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.3402d544.chunk.js.map